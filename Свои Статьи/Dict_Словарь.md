# Словарь (DICT)

dict – это неупорядоченная коллекция из нуля или более пар «ключ-значение», в которых в качестве ключей могут использоваться
ссылки на хешируемые объекты, а в качестве значений – ссылки на объекты любого типа. Словари относятся к категории изменяемых типов, поэтому легко можно добавлять и удалять их элементы, но так как они являются неупорядоченными коллекциями, к ним не применимо понятие индекса и не применима операция извлечения среза.

#### Тип данных DICT может вызываться:

1. Как функция dict() – без аргументов она возвращает пустой словарь.

   ```python
   my_dict = dict()
   ```

2. C аргументом типа dict возвращается поверхностная копия словаря. 

   ```python
   my_dict = dict(dct)
   ```

3. Может создаваться из последовательности, при чем каждый элемент последовательности в свою очередь является **последовательностью из двух объектов**, первый из которых используется в качестве ключа, а второй – в качестве значения.

   ```python
   my_dict = dict([[1, 2], ['a', 'v']]) >>> {1: 2, 'a': 'v'}
   my_dict = dict([(1, 2), ('a', 'v')]) >>> {1: 2, 'a': 'v'}
   ```

4. Можно использовать  именованные аргументы; тогда имена аргументов будут играть роль ключей, а значения аргументов – роль значений ключей

   ```python
   a = dict(one=1, two=2, three=3) >>> {'one': 1, 'two': 2, 'three': 3}
   ```

5. Словари могут создаваться с помощью фигурных скобок – пустые скобки {} создадут пустой словарь

6. Словари могут создаваться с помощью *генераторов словарей*

   [Пример с сайта][https://docs-python.ru/tutorial/vstroennye-funktsii-interpretatora-python/funktsija-dict/]

   ```python
   # Все следующие выражения возвращают словарь {"one": 1, "two": 2, "three": 3}
   >>> a = dict(one=1, two=2, three=3)
   >>> a
   # {'one': 1, 'two': 2, 'three': 3}
   >>> b = {'one': 1, 'two': 2, 'three': 3}
   >>> b
   # {'one': 1, 'two': 2, 'three': 3}
   >>> c = dict(zip(['one', 'two', 'three'], [1, 2, 3]))
   >>> c
   # {'one': 1, 'two': 2, 'three': 3}
   >>> d = dict([('two', 2), ('one', 1), ('three', 3)])
   >>> d
   # {'one': 1, 'two': 2, 'three': 3}
   >>> e = dict({'three': 3, 'one': 1, 'two': 2})
   >>> e
   # {'one': 1, 'two': 2, 'three': 3}
   
   >>> a == b == c == d == e
   True
   
   ```

#### Стоит помнить:

1. Ключи словарей являются уникальными, поэтому если в словарь добавляется пара «*ключ-значение*» с ключом, который уже присутствует в словаре, в результате происходит замена значения существующего ключа новым значением.  

2. Для доступа к отдельным элементам используются квадратные скобки: например, выражение d["one"]  вернет 1.
3. *Квадратные* скобки могут также использоваться *для добавления и удаления элементов* словаря. Чтобы добавить новый элемент, используется оператор =, например, d["X"] = 59. Для удаления элементов используется инструкция *del*, например, инструкция *del d["one"]* удалит из
   словаря элемент с ключом "one" или возбудит исключение KeyError, если элемент с указанным ключом отсутствует в словаре.  
4. Элементы могут удаляться (и возвращаться вызывающей программе) методом *dict.pop()*.  
5. Словари поддерживают встроенную функцию *len()* .
6. Для ключей поддерживают возможность быстрой проверки на вхождение с помощью операторов in и not in.  
7. Методы dict.items(), dict.keys() и dict.values() возвращают представления словарей. Представление словаря – это в действительности итерируемый объект, доступный только для чтения и хранящий элементы, ключи или значения словаря в зависимости от того, какое представление было запрошено.  

##### Методы словарей  

| Синтаксис           | Описание                                                     | IT   |
| ------------------- | ------------------------------------------------------------ | ---- |
| d.clear()           | Удаляет все элементы из словаря d                            |      |
| d.copy()            | Возвращает поверхностную копию словаря d                     |      |
| d.fromkeys( s, v)   | Возвращает словарь типа dict, ключами которого являются элементы последовательности s, а значениями либо None, либо v, если аргумент v определен |      |
| d.get(k)            | Возвращает значение ключа k или None, если ключ k отсутствует в словаре |      |
| d.get(k, v)         | Возвращает значение ключа k или v, если ключ k отсутствует в словаре |      |
| d.items()           | Возвращает представлениеa всех пар (ключ, значение) в словаре d | it   |
| d.keys()            | Возвращает представление всех ключей словаря d               | it   |
| d.values()          | Возвращает представление всех значений в словаре d           | it   |
| d.pop(k)            | Возвращает значение ключа k и удаляет из словаря элемент с ключом k или возбуждает исключение KeyError, если ключ k отсутствует в словаре |      |
| d.pop(k, v)         | Возвращает значение ключа k и удаляет из словаря элемент с ключом k или возвращает значение v, если ключ k отсутствует в словаре |      |
| d.popitem()         | Возвращает и удаляет произвольную пару (ключ, значение) из словаря d или возбуждает исключение KeyError, если словарь d пуст |      |
| d.setdefault( k, v) | То же, что и dict.get() за исключением того, что, если ключ k в словаре отсутствует, в словарь вставляется новый элемент с ключом k и со значением None или v, если аргумент v задан |      |
| d.update(a)         | Добавляет в словарь d пары (ключ, значение) из a, которые отсутствуют в словаре d, а для каждого ключа, который уже присутствует в словаре d, выполняется замена соответствующим значением из a; a может быть словарем, итерируемым объектом с парами (ключ, значение) или именованными аргументами |      |

IT- итерируемый объект

8. Представления ключей и элементов поддерживают некоторые операции, свойственные множествам. Например, у нас имеются представление словаря v и множество или представление словаря x; для этой пары поддерживаются следующие операции:

   ```python
   v & x # Пересечение
   v | x # Объединение
   v - x # Разность
   v ^ x # Строгая дизъюнкция
   ```

   ```python
   d = {}.fromkeys ("ABCD", 3) # d == {'A': 3, 'B': 3, 'C': 3, 'D': 3}
   s = set("ACX") 				# s == {'A', 'C', 'X'}
   res = d.keys() & s 		# matches == {'A', 'C'}
   ```

##### Генератор словарей

**Генератор словарей** – это выражение и цикл с необязательным условием, заключенное в фигурные скобки, очень напоминающее генератор множеств. Подобно генераторам списков и множеств, генераторы словарей поддерживают две формы записи:

```python
{keyexpression: valueexpression for key, value in iterable}
{keyexpression: valueexpression for key, value in iterable if condition}
```

```python
#Пример 1
file_sizes = {name: os.path.getsize(name) for name in os.listdir(".")}
#Пример 2
file_sizes = {name: os.path.getsize(name) for name in os.listdir(".")
if os.path.isfile(name)}

"""
os.listdir() - возвращает список файлов и каталогов в указанном каталоге
os.path.getsize() - возвращает размер заданного файла в байтах
os.path.isfile() - отфильтрует каталоги и другие элементы списка, не являющиеся файлами
"""
#Пример 3
inverted_d = {v: k for k, v in d.items()}

```

Как и в случае с генераторами списков и множеств, в качестве итерируемого объекта в генераторах словарей могут использоваться другие генераторы, то есть это могут быть вложенные генераторы любого типа.

##### Словари со значениями по умолчанию

```python
words = {}
words[word] = words.get(word, 0) + 1
"""Когда слово встречается впервые (когда необходимо создать новый элемент со значением счетчика, равным 1), а также случаи, когда слово встречается повторно (когда необходимо прибавить 1 к значению счетчика для уже существующего слова)."""
```

При создании словаря со значениями по умолчанию мы можем определять фабричную функцию. **Фабричная функция** – это функция, которая вызывается, чтобы получить объект определенного типа. Фабричная функция, передаваемая словарю со значениями по умолчанию, используется для создания значений по умолчанию для отсутствующих ключей.  Внимание,  имя функции – это ссылка на объект функции, поэтому, когда функция передается в качестве аргумента, передается одно только имя функции. Когда вслед за именем функции записываются круглые скобки, они сообщают интерпретатору, что он должен вызвать эту функцию.  

[Defaultdict in Python](https://www.geeksforgeeks.org/defaultdict-in-python/) `defaultdict` позволяет вызывающему объекту указать значение по умолчанию (возвращаемое значение) заранее при инициализации контейнера."

```python
from collections import defaultdict
# Defining a dict
d = defaultdict(list) #Фабричная функция
for i in range(5):
    d[i].append(i)     
print("Dictionary with values as list:")
print(d)
```

Пример 2

```python
from collections import defaultdict
  
# Function to return a default
# values for keys that is not
# present
def def_value():
    return "Not Present"
      
# Defining the dict
d = defaultdict(def_value)
d["a"] = 1
d["b"] = 2
  
print(d["a"])    
print(d["b"])
print(d["c"])
>>>1
>>>2
>>>Not Present
```

[Python Dictionary | setdefault()](https://www.geeksforgeeks.org/python-dictionary-setdefault-method/)

```python
dict.setdefault(key, default = None)
```

Метод `dict.setdefault()` Получит значение ключа, если его нет добавит в словарь с указанным значением по умолчанию. Автоматически добавляет элемент словаря, если он отсутствует.

```python
Dictionary1 = { 'A': 'Geeks', 'B': 'For'}
 
# using setdefault() method
# when key is not in the Dictionary
Third_value = Dictionary1.setdefault('C')
print("Dictionary:", Dictionary1)			>>> Dictionary: {'A': 'Geeks', 'B': 'For', 'C': None}
print("Third_value:", Third_value)			>>> Third_value: None
 
# using setdefault() method
# when key is not in the Dictionary
# but default value is provided
Fourth_value = Dictionary1.setdefault('D', 'Geeks') 
print("Dictionary:", Dictionary1)					>>> Dictionary: {'A': 'Geeks', 'B': 'For', 'C': None, 'D': 'Geeks'}
print("Fourth_value:", Fourth_value)				>>> Fourth_value: Geeks
```

